<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zoomed Map from France to Turkey</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        svg {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
    <svg id="map"></svg>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const width = window.innerWidth;
            const height = window.innerHeight;

            // Create the SVG element
            const svg = d3.select('#map')
                .attr('width', width)
                .attr('height', height);

            // Coordinates for France and Turkey (central points)
            const france = [2.2137, 46.6034];
            const turkey = [35.2433, 38.9637];

            // Define the bounding box for the area of interest
            const bbox = {
                x: Math.min(france[0], turkey[0]) - 10,  // Adjust padding as needed
                y: Math.min(france[1], turkey[1]) - 10,
                width: Math.abs(france[0] - turkey[0]) + 20, // Adjust padding as needed
                height: Math.abs(france[1] - turkey[1]) + 20
            };

            // Set up the projection and path
            const projection = d3.geoMercator()
                .scale(600)                      // Adjust scale for zoom
                .translate([width / 2, height / 2])
                .fitExtent([[0, 0], [width, height]], {
                    type: 'FeatureCollection',
                    features: [] // Will be filled with filtered countries
                });

            const path = d3.geoPath().projection(projection);

            // Load GeoJSON data for the world
            d3.json('https://d3js.org/world-50m.v1.json').then(function(worldData) {
                // Filter countries within the bounding box
                const filteredCountries = topojson.feature(worldData, worldData.objects.countries).features.filter(feature => {
                    const [x, y] = d3.geoCentroid(feature);
                    return x >= bbox.x && x <= bbox.x + bbox.width &&
                           y >= bbox.y && y <= bbox.y + bbox.height;
                });

                // Update the projection to fit the filtered countries
                projection.fitExtent([[0, 0], [width, height]], {
                    type: 'FeatureCollection',
                    features: filteredCountries
                });

                // Draw the filtered countries
                svg.append('path')
                    .datum({ type: 'FeatureCollection', features: filteredCountries })
                    .attr('d', path)
                    .attr('fill', '#bada55')
                    .attr('stroke', '#000');
                
                // Draw the route line
                const franceCoords = projection(france);
                const turkeyCoords = projection(turkey);

                const line = d3.line()
                    .x(d => d[0])
                    .y(d => d[1]);

                svg.append('path')
                    .datum([franceCoords, turkeyCoords])
                    .attr('d', line)
                    .attr('fill', 'none')
                    .attr('stroke', 'red')
                    .attr('stroke-width', 2);
            });
        });
    </script>
</body>
</html>
